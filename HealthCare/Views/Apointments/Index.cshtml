@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model IEnumerable<HealthCare.Models.Apointment>
<body class="bg-light">

  <div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="h4 mb-0">Appointments</h2>
      <a asp-controller="Doctors" asp-action="Index" class="btn btn-outline-secondary">Back to Doctors</a>
    </div>

    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Patient Name</th>
            <th scope="col">Doctor</th>
            <th scope="col">Date</th>
            <th scope="col">Time</th>
            <th scope="col" class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          @if (Model != null && Model.Any())
          {
              foreach (var appt in Model)
              {
                  <tr>
                      <th scope="row">@appt.Id</th>
                      <td>@appt.PatientName</td>
                      <td>@(appt.Doctor?.Name ?? "—")</td>
                      <td>@(appt.Date.ToString())</td>
                      <td>@(appt.Time.ToString())</td>
                      <td class="text-center">
                        <div class="d-flex gap-2 justify-content-center">
                          <a asp-action="Details" asp-route-id="@appt.Id" class="btn btn-sm btn-outline-primary">View</a>

                          <a asp-action="Edit" asp-route-id="@appt.Id" class="btn btn-sm btn-outline-secondary">Edit</a>

                          <form asp-action="Delete" asp-route-id="@appt.Id" method="post" class="d-inline">
                              @Html.AntiForgeryToken()
                              <button type="submit" class="btn btn-sm btn-outline-danger"
                                      onclick="return confirm('Are you sure you want to delete this appointment?');">
                                  Delete
                              </button>
                          </form>
                        </div>
                      </td>
                  </tr>
              }
          }
          else
          {
              <tr>
                  <td colspan="6" class="text-center text-muted">No appointments found.</td>
              </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
